
<div id="wrapper">
    <div class="container">
        <div class="row">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h2>Forgot Password</h2>
                </div>
                <div class="panel-body">
                    <form *ngIf="!gotUser" #form="ngForm" (ngSubmit)="login(form.value);">
                        <div class="row">
                            <div class="col-sm-3">
                                <h4>Username:</h4>
                            </div>
                            <div class="col-sm-5">
                                <h4><input type="text" name="username" [(ngModel)]="loginInfo.username" class="form-control" required /></h4>
                            </div>
                            <div class="col-sm-2">
                                <h4>
                                    <button class="btn btn-primary" type="submit">
                                        <span class="fa fa-lg fa-share"></span> Submit
                                    </button>
                                </h4>
                            </div>
                        </div>
                    </form>
                    <form *ngIf="gotUser" #questionForm="ngForm" (ngSubmit)="reset(questionForm.value);">
                        <div class="row">
                            <div class="col-sm-3">
                                <h4>Secret Question:</h4>
                            </div>
                            <div class="col-sm-5">
                                <h4>{{loginInfo.question}}</h4>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-3">
                                <h4>Secret Answer:</h4>
                            </div>
                            <div class="col-sm-5">
                                <h4>
                                    <input type="text" name="answer" [(ngModel)]="loginInfo.answer" class="form-control" required />
                                    <input type="hidden" name="applicationUserId" [(ngModel)]="loginInfo.applicationUserId" />
                                </h4>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-sm-3">
                                <h4>New Password:</h4>
                            </div>
                            <div class="col-sm-5">
                                <h4><input type="password" name="newPassword" [(ngModel)]="loginInfo.newPassword" class="form-control" required /></h4>
                            </div>
                            <div class="col-sm-2">
                                <h4>
                                    <button class="btn btn-primary" type="submit">
                                        <span class="fa fa-lg fa-share"></span> Submit
                                    </button>
                                </h4>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<div bsModal #successModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" (onHide)="dismissModal()" aria-labelledby="mySmallModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" aria-label="Close" (click)="successModal.hide()">
                    <span aria-hidden="true" class="text-primary">&times;</span>
                </button>
                <h4 class="modal-title">Success</h4>
            </div>
            <div class="modal-body">
                Password has been reset successfully. You may now login using the new password.
            </div>
        </div>
    </div>
</div>

<div bsModal #failureModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" aria-label="Close" (click)="failureModal.hide()">
                    <span aria-hidden="true" class="text-primary">&times;</span>
                </button>
                <h4 class="modal-title">Error</h4>
            </div>
            <div class="modal-body">
                Unable to find that username in system. Please try again.
            </div>
        </div>
    </div>
</div>

<div bsModal #failureQuestionModal="bs-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" aria-label="Close" (click)="failureModal.hide()">
                    <span aria-hidden="true" class="text-primary">&times;</span>
                </button>
                <h4 class="modal-title">Error</h4>
            </div>
            <div class="modal-body">
                Unable to verify answer to question. Please try again.
            </div>
        </div>
    </div>
</div>